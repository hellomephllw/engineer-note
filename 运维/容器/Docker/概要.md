[toc]

## 1 概述

Linux容器不是模拟一个完整的操作系统，而是对进程进行隔离。或者说，在正常进程的外面套了一个保护层。对于容器里面的进程来说，它接触到的各种资源都是虚拟的，从而实现与底层系统的隔离。

容器可以提供一致的环境，迁移更加方便，更加容易横向扩展。而且容器相比于虚拟机来说占用资源极少（资源占用是弹性的），启动快，性能更好（接近于原生）。

## 2 镜像

Docker镜像是一个特殊的文件系统，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。镜像不包含任何动态数据，其内容在构建之后也不会被改变。

因为镜像包含操作系统完整的root文件系统，其体积往往是庞大的，因此在Docker设计时，就充分利用Union FS的技术，将其设计为分层存储的架构。

## 3 容器

镜像（Image）和容器（Container）的关系，就像是面向对象程序设计中的类和实例一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。

前面讲过镜像使用的是分层存储，容器也是如此。每一个容器运行时，是以镜像为基础层，在其上创建一个当前容器的存储层，我们可以称这个为容器运行时读写而准备的存储层为 容器存储层。

## 4 仓库

镜像构建完成后，可以很容易的在当前宿主机上运行，但是，如果需要在其它服务器上使用这个镜像，我们就需要一个集中的存储、分发镜像的服务，Docker Registry 就是这样的服务。

## 5 数据卷

容器外部的目录是指宿主机上的目录，它可以与容器内部的目录进行数据共享。在 Docker 中，你可以通过挂载（Mount）宿主机上的目录到容器内部来实现数据共享。这样，容器内部对共享目录的修改会直接反映到宿主机上，反之亦然。它有如下特点：
 - 数据卷可以在容器之间共享或重用数据
 - 数据卷中的更改可以立即生效
 - 数据卷中的更改不会包含在镜像的更新中
 - 数据卷默认会一直存在，即使容器被删除
 - 数据卷的生命周期一直持续到没有容器使用它为止

## 6 网络

可以通过映射端口让外部访问容器内的端口。
也可以通过bridge模式来建立容器之间公共网络。

## 7 namespace

命名空间是 Linux 内核一个强大的特性。每个容器都有自己单独的命名空间，运行在其中的应用都像是在独立的操作系统中运行一样。命名空间保证了容器之间彼此互不影响。

## 8 docker compose

可以支持让多个镜像共同构成一个完整的容器，也就是一个完整的项目。